<div class="wrapper  ">

  <app-sidebar></app-sidebar>

  <div class="content  " style="margin-left: 6% !important;width: 100% !important; ">

    <div id=" tamano" class=" container colorfondo" style="width: inherit ;height: inherit;">
      <div class="row">


        <div id="entradasdiv" class="color">
          <h3>Entradas</h3>

          <br>

          <div class="">
            <h4 class="color">Filtra las entradas:</h4>
            <div style="display: inline;">
              <select name="select" id="select-categoria" (change)="filtrocategoria()" class="form-control"
                style="width: 20%; display: inline; margin: 1em;">
                <option value="null" selected>Ordenar por categoria </option>
                <option value="musica">musica </option>
                <option value="anime">anime </option>
                <option value="series">series </option>
              </select>
            </div>
            <div style="display: inline;">
              <input id="buscarautor" placeholder="Introduzca el Autor">
              <button type="button" (click)="filtroAutor()" class="btn btn-lg  color"><i
                  class="fas fa-search"></i>Buscar</button>
            </div>
            <div style="display: inline; margin-bottom: 5em;">

            </div>
          </div>
          <div class="col col-lg-12" style="width: 150%!important; height: 100%; margin-top: 5em;">
            <table class="table table-hover table-dark table-responsive-sm table-responsive-md table-responsive-lg fondotable "
              id="postsList" style="width:inherit; ">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Nombre</th>
                  <th scope="col">Autor</th>
                  <th scope="col">Categoria</th>
                  <th scope="col">Comentarios</th>
                  <th scope="col">Fecha</th>
                  <th scope="col">Opciones</th>

                </tr>
              </thead>
              <tbody>
                <tr *ngFor='let post of listaPost; index as i'>
                  <th scope="row">{{i+1}}</th>
                  <td>{{post.titulopost}}</td>
                  <td>{{post.usuario}}</td>
                  <td>{{post.categoria}}</td>
                  <td>{{post.comentarios.length}}</td>
                  <td>{{post.fecha}}</td>

                  <td> <button type="button" class="btn botonOpciones"
                      (click)="eliminarPost(post._id)">Eliminar</button>
                    <button type="button" class="btn  botonOpciones" (click)="editarPost(post)"> Editar</button> </td>
                </tr>

              </tbody>
            </table>
          </div>
        </div>



      </div>

    </div>

    <div id="formularioeditar" *ngIf="postEditar">




      <div class="container colorfondo" id="tamano">
        <div class="row">
          <!-- <div class="col col-lg-12" style="margin-top: 5em;">
          <h3 class="color"> Titulo post</h3>
          <input type="text" style="width: 20em;" id="titulo-post" [(ngModel)]="tituloPost">
        </div> -->

          <div class="col col-12">
            <h3 class="color"> Titulo post</h3>
            <div [formGroup]="nombrePostForm" style="width: 20em;" id="titulo-post">
              <input [ngClass]="{'input-error':nombrePost.invalid && (nombrePost.dirty || nombrePost.touched ) }"
                formControlName="nombrePost" type="text" placeholder="Titulo Post">
              <div *ngIf="nombrePost.invalid && (nombrePost.dirty || nombrePost.touched )" class="alert alert-danger"
                role="alert" style="width: 13em;"> Campo no válido:
                <span class="error" *ngIf="nombrePost.errors.required">Error el campo es Obligatorio</span>
                <span *ngIf="nombrePost.errors.minLength"> El tamaño minimo son 5 caracteres</span>
              </div>
            </div>
          </div>


          <div class="col-lg-12 " style="margin-top: 5em; text-align: center;">
            <button class=" btn btn-lg borde" type="button" id="btn-archivo">Seleccionar
              Archivo</button>
          </div>

        </div>

        <div class="row">
          <div class="col col-12">
            <div style="margin-top: 3em;">
              <div [froalaEditor]="options" [(froalaModel)]="contenidoEditor"></div>

              <div *ngIf="validarContenidoEditor()==false" class="alert alert-danger" role="alert" style="width: 13em;">
                La descripción no puede ir vacía.
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col col-lg-12">
          </div>

          <div class="col col-lg-12">
            <div>
              <select id="select-categorias" class="form-control">
                <option *ngFor="let categoria of listaCategorias" value="{{categoria.nombrecategoria}}">
                  {{categoria.nombrecategoria}}
                </option>
              </select>

              <label for="comentarios" style="color: white;">Incluir comentarios</label><br>
              <input type="checkbox" id="comentarios" name="comentarios" value="true" style="color: white;">

              <br>
              <br>


              <button type="button" id="btn-guardar-post" class="btn botonOpciones" (click)="guardarPost()"
                [disabled]="!nombrePostForm.valid || validarContenidoEditor()==false">Guardar</button>
              <button type="button" class="btn botonOpciones" (click)="postEditar=null">Cerrar Formulario</button>

            </div>
          </div>
        </div>



      </div>

    </div>



  </div>
</div>
